name: Create GitHub Release

on:
    workflow_dispatch:
        inputs:
            version:
                description: "Version number (e.g. 1.4.5)"
                required: true

jobs:
    create-release:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v3

            - name: Configure Git user
              run: |
                  git config user.name "github-actions"
                  git config user.email "github-actions@users.noreply.github.com"

            - name: Create Git tag
              run: |
                  git tag v${{ github.event.inputs.version }}
                  git push origin v${{ github.event.inputs.version }}

            - name: Create GitHub Release
              uses: softprops/action-gh-release@v1
              with:
                  tag_name: v${{ github.event.inputs.version }}
                  name: Release v${{ github.event.inputs.version }}
                  body: "Automated release v${{ github.event.inputs.version }}"
